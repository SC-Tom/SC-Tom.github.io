const rule = require('../../lib/no-map');
const RuleTester = require('eslint').RuleTester;

const ruleTester = new RuleTester();
ruleTester.run('no-map', rule, {
  valid: [{
    code: 'const api = { collections: { map: (e) => { console.log(e); }}}; const newArray = api.collections.map(value => { return value * 2;});',
    parserOptions: { ecmaVersion: 6, sourceType: 'module' }
  }, {
    code: 'const collections = { forEach: (e) => { console.log(e); }}; const m = collections.map((e) => e * 2);',
    parserOptions: { ecmaVersion: 6, sourceType: 'module' }
  }],
  invalid: [{
    code: 'var arr = [1, 2, 3]; arr.map(function(e) { var m = e;})',
    errors: [{
      message: 'Please dont use map, as it could create problems in old browser.',
      type: 'MemberExpression'
    }]
  }]
});
